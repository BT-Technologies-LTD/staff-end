<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Holidays</title>
    <link rel="stylesheet" type="text/css" href="css/app.css" />
    <style>
        @keyframes fillFromTop {
            0% {
                transform: scaleY(0);
                transform-origin: top;
            }

            100% {
                transform: scaleY(1);
                transform-origin: top;
                background-color: currentColor;
            }
        }

        .hr-animate {
            animation: fillFromTop 0.5s ease-in-out forwards;
            background-color: transparent;
            color: transparent;
        }

        .hr-animate::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform: scaleY(0);
            transform-origin: top;
        }

        .bg-primary {
            color: #83396E
        }

        .hr-animate.fill::before {
            transform: scaleY(1);
        }
    </style>
</head>

<body class="pt-5">
    <script src="https://cdn.jsdelivr.net/npm/theme-change@2.4.0/index.js"></script>

    <nav class="navbar shadow-2xl fixed z-[100] left-0 right-0 rounded-full px-8 bg-base-100 w-[75%] mx-auto">
        <div class="navbar-start">
            <div class="dropdown">
                <div tabindex="0" role="button" class="btn btn-ghost lg:hidden">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h8m-8 6h16" />
                    </svg>
                </div>
                <ul tabindex="0"
                    class="menu menu-sm dropdown-content bg-base-100 rounded-box z-[100] mt-3 w-52 p-2 shadow">
                    <li><a class="rounded-full" href="/dashboard">Dashboard</a></li>
                    <li><a href="/holidays" class="rounded-full text-white bg-[#83396E] dark:bg-[#3B1332]">Holidays</a>
                    </li>
                    <li><a href="/tasks" class="rounded-full">Tasks</a></li>
                    <li><a class="rounded-full">Articles</a></li>
                    <form action="/logout" method="post" class="w-full flex">
                        <button type="submit"
                            class="btn rounded-full mx-auto w-[75%] self-center text-white bg-red-600">Sign
                            Out</button>
                    </form>
                </ul>
            </div>
            <div class="avatar placeholder">
                <div class="bg-neutral text-neutral-content w-8 rounded-full">
                    <span class="text-xs">HR</span>
                </div>
            </div>
        </div>
        <div class="navbar-center hidden lg:flex">
            <ul class="menu menu-horizontal px-1">
                <li><a class="rounded-full hover:bg-[#9A4D86]  hover:text-white me-3" href="/dashboard">Dashboard</a>
                </li>

                <li><a href="/holidays"
                        class="me-3 rounded-full text-white bg-[#83396E] hover:bg-[#9A4D86] hover:text-white">Holidays</a>
                </li>
                <li><a href="/tasks" class="me-3 rounded-full hover:bg-[#9A4D86]  hover:text-white">Tasks</a>
                </li>
                <li><a class="rounded-full hover:bg-[#9A4D86]  hover:text-white">Articles</a>
                </li>
            </ul>
        </div>
        <div class="navbar-end gap-5">
            <label class="swap swap-rotate">
                <!-- this hidden checkbox controls the state -->
                <input data-toggle-theme="light,dark" type="checkbox" value="dark" class="theme-controller" />

                <!-- sun icon -->
                <svg value="light" class="swap-off h-8 w-8 fill-current" xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24">
                    <path
                        d="M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z" />
                </svg>

                <!-- moon icon -->
                <svg value="dark" class="swap-on h-8 w-8 fill-current" xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24">
                    <path
                        d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z" />
                </svg>
            </label>


            <form class="hidden md:flex" action="/logout" method="post">
                <button type="submit"
                    class="btn rounded-full btn-outline border-0 hover:border-red-600 hover:bg-red-600 hover:text-white">Log
                    Out</button>
            </form>
        </div>
    </nav>

    <div class="mt-36 w-[75%] mx-auto">
        <ul class="timeline timeline-vertical">
            <% holidays.forEach((holiday, index)=> {
                const holidayDate = new Date(holiday.date);
                const isPast = holidayDate < new Date(); %>
                    <li>
                        <hr class="hr-animate <%= isPast ? 'bg-primary' : '' %>" />
                        <div class="timeline-start">
                            <%= formatDate(holiday.date) %>
                        </div>
                        <div class="timeline-middle">
                            <% if (isPast) { %>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="#83396E"
                                    class="h-5 w-5">
                                    <path fill-rule="evenodd"
                                        d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z"
                                        clip-rule="evenodd" />
                                </svg>
                                <% } else { %>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                        class="bi bi-circle" viewBox="0 0 16 16">
                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                                    </svg>
                                    <% } %>
                        </div>
                        <div class="timeline-end rounded-2xl timeline-box">
                            <%= holiday.name %>
                        </div>
                        <hr class="hr-animate h-full <%= isPast ? 'bg-primary' : 'bg-background' %>" </li>
                        <% }) %>
        </ul>
    </div>

    <script src="/misc/theme-switch.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () =>
        {
            document.querySelectorAll('.hr-animate').forEach((hr, index) =>
            {
                // Set animation delay based on the index
                hr.style.animationDelay = `${index * 0.2}s`;
                // Adjust the multiplier for desired delay
                // Add the fill class to trigger the animation
                setTimeout(() => hr.classList.add('fill'), 20);
            });
        });
    </script>
</body>

</html>